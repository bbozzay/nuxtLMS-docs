---
title: "Methods"
description: "Helpers to use for Nuxt functions"
---
`loginThenRedirect(url)`

Adds an encoded param to the login url containing the state. When the login is successful, the callback url will reload with the encoded state. By default, a redirectUrl is passed to the state. Middleware decodes the state param and then redirects to the specified route.


`redirectFromState()`

Redirects to the redirectUrl specified in the encoded state param generated by `loginThenRedirect()`.


`fetchMeta()`

Fetches `user_metadata` and `app_metadata` from the API and then populates the store.


`fetchUserMeta()`

Fetches `user_metadata` from the API and then populates the store.


`fetchAppMeta()`

Fetches `app_metadata` from the API and then populates the store.


`setUserMeta(payload)`

Updates the API `user_metadata` and then refreshes the store with the changes that match the server.


`fetchUserRoles()`

Fetches the current user's assigned roles and then populates the store.


`addUserToRole(meta)`

Assigns a role to a user then triggers `fetchMeta()` to refresh the store state.


`fetchVideoId(role, videoId)`

Fetches and decrypts a video ID.


`createCustomer()`

Creates a customer in stripe then calls `fetchMeta()` to update the store with the assigned `customer_id`. 


`getCustomerId()`

Retrieves `stripe_customer_id` from `appMeta()`


`createThenCheckout(card, meta)`

Creates a stripe payment intent, confirms a card payment, then adds a user to role.


`confirmCardPayment(card, paymentIntent)`

Submits a card payment and confirms the payment intent.


`createPaymentIntent({ plan_index })`